---
title: "R√©f√©rence API - v2.0"
description: "Documentation API compl√®te pour v2.0 avec support GraphQL"
---

# API Salsa as a Service v2.0

L'API v2.0 ajoute le support GraphQL, webhooks am√©lior√©s et nouveaux endpoints de pr√©vision IA.

## URL de base

```
https://api.salsaasaservice.com/v2
```

> **Note:**
**Nouveau dans v2.0** : Endpoint GraphQL disponible sur `https://api.salsaasaservice.com/graphql`


## Authentification

Toutes les requ√™tes API n√©cessitent une authentification avec votre cl√© API.

### En-t√™te d'authentification

```http
Authorization: Bearer VOTRE_CLE_API
```

> **Warning:**
**Changement v2.0** : Les cl√©s API v1.0 ne fonctionnent pas avec v2.0. G√©n√©rez une nouvelle cl√© depuis **Param√®tres > D√©veloppeur > API v2.0**.


## Limites de taux

- **Plan Starter** : 10 000 requ√™tes par heure (augment√© depuis v1.0)
- **Plan Professionnel** : 100 000 requ√™tes par heure
- **Plan Entreprise** : Illimit√©

## API GraphQL (Nouveau dans v2.0)

### Endpoint GraphQL

```
https://api.salsaasaservice.com/graphql
```

### Exemple de requ√™te

```graphql
query GetProductionForecast {
  forecast(location: "loc_123", days: 7) {
    date
    recipes {
      id
      name
      predictedDemand {
        quantity
        unit
        confidence
      }
    }
  }
}
```

### Abonnements en temps r√©el

**Nouveau dans v2.0** : Abonnements WebSocket pour mises √† jour en direct

```graphql
subscription OnQualityAlert {
  qualityAlert(location: "loc_123") {
    id
    severity
    sensorId
    message
    timestamp
  }
}
```

### Explorer GraphQL interactif

Explorez le sch√©ma GraphQL et testez les requ√™tes :

```
https://api.salsaasaservice.com/graphql/explorer
```

## API REST

L'API REST reste disponible pour compatibilit√©.

### Endpoints principaux


**[Gestion d'inventaire](#inventaire)**  
G√©rez ingr√©dients, stock et fra√Æcheur.

**[Pr√©visions IA](#previsions-ia)**  
Nouveau dans v2.0 : Acc√©dez aux pr√©visions de demande aliment√©es par IA.

**[Capteurs IoT](#capteurs-iot)**  
Nouveau dans v2.0 : G√©rez capteurs et lectures.

**[Production](#production)**  
Suivez lots de production et qualit√©.



## Pr√©visions IA (Nouveau dans v2.0)

### Obtenir les pr√©visions de demande

R√©cup√©rez les pr√©visions aliment√©es par IA pour vos recettes.

```http
GET /v2/ai/forecast?location=loc_123&days=7
```

**R√©ponse :**

```json
{
  "forecast_period": {
    "start_date": "2024-01-20",
    "end_date": "2024-01-27",
    "days": 7
  },
  "predictions": [
    {
      "date": "2024-01-20",
      "recipe_id": "rec_456",
      "recipe_name": "Salsa maison",
      "predicted_demand": {
        "quantity": 12.5,
        "unit": "gallons",
        "confidence_interval": [11.2, 13.8],
        "confidence_level": 0.95
      },
      "factors": {
        "day_of_week": "Vendredi (+20%)",
        "weather": "Ensoleill√© (+5%)",
        "events": ["Concert local (+10%)"]
      }
    }
  ],
  "model_accuracy": {
    "mape": 5.2,
    "last_updated": "2024-01-19T08:00:00Z"
  }
}
```

### Entra√Æner le mod√®le IA

R√©entra√Ænez le mod√®le avec de nouvelles donn√©es.

```http
POST /v2/ai/forecast/train
```

## Capteurs IoT (Nouveau dans v2.0)

### Obtenir tous les capteurs

```http
GET /v2/iot/sensors?location=loc_123
```

**R√©ponse :**

```json
{
  "sensors": [
    {
      "id": "sensor_001",
      "name": "Capteur de temp√©rature - R√©frig√©rateur 1",
      "type": "temperature",
      "location": "loc_123",
      "status": "online",
      "last_reading": {
        "value": 3.5,
        "unit": "celsius",
        "timestamp": "2024-01-20T10:30:00Z",
        "quality": "good"
      },
      "battery_level": 85
    }
  ]
}
```

### Obtenir les lectures de capteur

```http
GET /v2/iot/sensors/{sensor_id}/readings?start_date=2024-01-01&end_date=2024-01-31
```

### Configurer les alertes de capteur

```http
POST /v2/iot/sensors/{sensor_id}/alerts
```

**Corps de la requ√™te :**

```json
{
  "alert_type": "threshold",
  "conditions": {
    "min_value": 2.0,
    "max_value": 4.0,
    "unit": "celsius"
  },
  "notification_channels": ["email", "sms", "slack"],
  "severity": "high"
}
```

## Webhooks v2 (Am√©lior√©)

**Nouveau dans v2.0** : Syst√®me de webhooks am√©lior√© avec :

- Livraison garantie avec logique de r√©essai
- Filtrage et routage d'√©v√©nements
- V√©rification de signature
- Suivi de statut de livraison

### √âv√©nements disponibles

- `forecast.updated` : Pr√©visions IA mises √† jour
- `sensor.reading` : Nouvelle lecture de capteur
- `sensor.alert` : Alerte de capteur d√©clench√©e
- `production.batch_completed` : Lot de production termin√©
- `inventory.low_stock` : Stock faible d√©tect√©
- `quality.alert` : Probl√®me de qualit√© d√©tect√©

### Configurer un webhook

```http
POST /v2/webhooks
```

**Corps de la requ√™te :**

```json
{
  "url": "https://votre-app.com/webhooks/salsa",
  "events": [
    "forecast.updated",
    "sensor.alert",
    "production.batch_completed"
  ],
  "secret": "votre_secret_webhook",
  "active": true
}
```

### Exemple de payload webhook

```json
{
  "event": "sensor.alert",
  "timestamp": "2024-01-20T10:30:00Z",
  "data": {
    "alert_id": "alert_789",
    "sensor_id": "sensor_001",
    "severity": "high",
    "message": "Temp√©rature hors limites",
    "reading": {
      "value": 8.5,
      "threshold": 4.0,
      "unit": "celsius"
    }
  },
  "signature": "sha256=abc123..."
}
```

## SDKs et biblioth√®ques

SDKs officiels pour v2.0 :


**[JavaScript/Node.js](https://github.com/salsaasaservice/salsa-js-v2)**  
SDK v2.0 avec support GraphQL et abonnements.

**[Python](https://github.com/salsaasaservice/salsa-python-v2)**  
SDK Python v2.0 avec support IA et IoT.

**[PHP](https://github.com/salsaasaservice/salsa-php-v2)**  
SDK PHP v2.0 pour applications web.



## Environnement Sandbox

Testez vos int√©grations dans un environnement s√ªr :

**URL Sandbox :**
```
https://api-sandbox.salsaasaservice.com/v2
```

> **Warning:**
**Donn√©es Sandbox** : L'environnement sandbox utilise des donn√©es de test et n'affecte pas votre compte de production.


## Support

Besoin d'aide avec l'API v2.0 ?

- üìß **E-mail** : api-support@salsaasaservice.com
- üìö **Documentation** : Documentation compl√®te GraphQL et REST
- üí¨ **Discord d√©veloppeur** : Rejoignez notre communaut√©
- üé• **Tutoriels** : Tutoriels d'int√©gration vid√©o

> **Note:**
**Support API am√©lior√©** : Les clients v2.0 re√ßoivent un support API prioritaire et acc√®s √† nos ing√©nieurs API.

